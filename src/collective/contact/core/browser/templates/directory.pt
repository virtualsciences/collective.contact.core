<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en"
      lang="en"
      xmlns:i18n="http://xml.zope.org/namespaces/i18n"
      xmlns:tal="http://xml.zope.org/namespaces/tal"
      xmlns:metal="http://xml.zope.org/namespaces/metal"
      metal:use-macro="context/main_template/macros/master"
      i18n:domain="collective.contact.core">
<head>
    <metal:block fill-slot="top_slot"
                 tal:define="disable_column_one python:request.set('disable_plone.leftcolumn',1);
                             disable_column_two python:request.set('disable_plone.rightcolumn',1);" />
</head>
<body>

<div metal:fill-slot="main"
     tal:define="organizations view/organizations;
                 persons view/persons;">
    <h1 tal:content="context/Title"></h1>

    <div id="organizations" class="image-overview" 
         tal:condition="organizations">
      <h2 tal:condition="persons"><tal:block i18n:translate="">Organizations</tal:block>:</h2>
      <ul class="visualNoMarker">
        <tal:block tal:repeat="organization organizations">
          <li class="organization"
              tal:define="obj organization/getObject;
                          logo obj/logo|nothing">
            <a tal:define="scales nocall:obj/@@images;
                           preview python:scales.scale('logo', 'thumb') if logo else {'url': ''};
                           image_src preview/url;
                           title obj/title;"
               tal:attributes="href organization/getURL;
                               style string:background: url('${image_src}') 50% 20% no-repeat;">
              <strong tal:content="title">title</strong>
            </a>
          </li>
        </tal:block>
      </ul>
    </div>

    <div id="persons" class="image-overview" 
         tal:condition="persons">
      <h2 tal:condition="organizations"><tal:block i18n:translate="">Persons</tal:block>:</h2>
      <ul class="visualNoMarker">
        <tal:block tal:repeat="person persons">
          <li class="person"
              tal:define="obj person/getObject;
                          photo obj/photo|nothing">
            <a tal:define="scales nocall:obj/@@images;
                           preview python:scales.scale('photo', 'thumb') if photo else {'url': ''};
                           image_src preview/url;
                           title obj/title;"
               tal:attributes="href person/getURL;
                               style string:background: url('${image_src}') 50% 50% / cover no-repeat;">
              <strong tal:content="title">title</strong>
            </a>
          </li>
        </tal:block>
      </ul>
    </div>
    <div class="visualClear"><!--   --></div>
</div>

</body>
</html>